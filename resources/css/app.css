@import 'tailwindcss';

@plugin 'tailwindcss-animate';

@source "../views";
@source '../../vendor/laravel/framework/src/Illuminate/Pagination/resources/views/*.blade.php';

@custom-variant dark (&:is(.dark *));

@theme {
    --font-sans:
        'Instrument Sans', ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';

    --radius-lg: var(--radius);
    --radius-md: calc(var(--radius) - 2px);
    --radius-sm: calc(var(--radius) - 4px);

    --color-background: var(--background);
    --color-foreground: var(--foreground);

    --color-card: var(--card);
    --color-card-foreground: var(--card-foreground);

    --color-popover: var(--popover);
    --color-popover-foreground: var(--popover-foreground);

    --color-primary: var(--primary);
    --color-primary-foreground: var(--primary-foreground);

    --color-secondary: var(--secondary);
    --color-secondary-foreground: var(--secondary-foreground);

    --color-muted: var(--muted);
    --color-muted-foreground: var(--muted-foreground);

    --color-accent: var(--accent);
    --color-accent-foreground: var(--accent-foreground);

    --color-destructive: var(--destructive);
    --color-destructive-foreground: var(--destructive-foreground);

    --color-border: var(--border);
    --color-input: var(--input);
    --color-ring: var(--ring);

    --color-chart-1: var(--chart-1);
    --color-chart-2: var(--chart-2);
    --color-chart-3: var(--chart-3);
    --color-chart-4: var(--chart-4);
    --color-chart-5: var(--chart-5);

    --color-sidebar: var(--sidebar);
    --color-sidebar-foreground: var(--sidebar-foreground);
    --color-sidebar-primary: var(--sidebar-primary);
    --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
    --color-sidebar-accent: var(--sidebar-accent);
    --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
    --color-sidebar-border: var(--sidebar-border);
    --color-sidebar-ring: var(--sidebar-ring);
}

/*
  The default border color has changed to `currentColor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
    *,
    ::after,
    ::before,
    ::backdrop,
    ::file-selector-button {
        border-color: var(--color-gray-200, currentColor);
    }
}

:root {
    --primary-color: #3b82f6;
    --primary-hover: #2563eb;
    --primary-dark: #1d4ed8;
    --secondary-color: #1e40af;
    --text-color: #1b1b18;
    --text-color-light: #6b7280;
    --bg-color: #FDFDFC;
    --border-color: rgba(25, 20, 0, 0.2);
    --card-bg: #ffffff;
    --card-border: #e5e7eb;
    --input-bg: #ffffff;
    --input-border: #d1d5db;
    --table-header-bg: #f9fafb;
    --table-row-hover: #f3f4f6;
    --shadow-color: rgba(0, 0, 0, 0.1);
    --background: oklch(1 0 0);
    --foreground: oklch(0.145 0 0);
    --card: oklch(1 0 0);
    --card-foreground: oklch(0.145 0 0);
    --popover: oklch(1 0 0);
    --popover-foreground: oklch(0.145 0 0);
    --primary: oklch(0.205 0 0);
    --primary-foreground: oklch(0.985 0 0);
    --secondary: oklch(0.97 0 0);
    --secondary-foreground: oklch(0.205 0 0);
    --muted: oklch(0.97 0 0);
    --muted-foreground: oklch(0.556 0 0);
    --accent: oklch(0.97 0 0);
    --accent-foreground: oklch(0.205 0 0);
    --destructive: oklch(0.577 0.245 27.325);
    --destructive-foreground: oklch(0.577 0.245 27.325);
    --border: oklch(0.922 0 0);
    --input: oklch(0.922 0 0);
    --ring: oklch(0.87 0 0);
    --chart-1: oklch(0.646 0.222 41.116);
    --chart-2: oklch(0.6 0.118 184.704);
    --chart-3: oklch(0.398 0.07 227.392);
    --chart-4: oklch(0.828 0.189 84.429);
    --chart-5: oklch(0.769 0.188 70.08);
    --radius: 0.625rem;
    --sidebar: oklch(0.985 0 0);
    --sidebar-foreground: oklch(0.145 0 0);
    --sidebar-primary: oklch(0.205 0 0);
    --sidebar-primary-foreground: oklch(0.985 0 0);
    --sidebar-accent: oklch(0.97 0 0);
    --sidebar-accent-foreground: oklch(0.205 0 0);
    --sidebar-border: oklch(0.922 0 0);
    --sidebar-ring: oklch(0.87 0 0);
    --chart-primary: #60a5fa;
    --chart-secondary: #34d399;
    --chart-tertiary: #f87171;
    --chart-quaternary: #a78bfa;
}

/* Transition douce pour le mode sombre */
.dark-transition * {
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
}

.dark {
    --background: oklch(0.145 0 0);
    --foreground: oklch(0.985 0 0);
    --card: oklch(0.145 0 0);
    --card-foreground: oklch(0.985 0 0);
    --popover: oklch(0.145 0 0);
    --popover-foreground: oklch(0.985 0 0);
    --primary: oklch(0.985 0 0);
    --primary-foreground: oklch(0.205 0 0);
    --secondary: oklch(0.269 0 0);
    --secondary-foreground: oklch(0.985 0 0);
    --muted: oklch(0.269 0 0);
    --muted-foreground: oklch(0.708 0 0);
    --accent: oklch(0.269 0 0);
    --accent-foreground: oklch(0.985 0 0);
    --destructive: oklch(0.396 0.141 25.723);
    --destructive-foreground: oklch(0.637 0.237 25.331);
    --border: oklch(0.269 0 0);
    --input: oklch(0.269 0 0);
    --ring: oklch(0.439 0 0);
    --chart-1: oklch(0.488 0.243 264.376);
    --chart-2: oklch(0.696 0.17 162.48);
    --chart-3: oklch(0.769 0.188 70.08);
    --chart-4: oklch(0.627 0.265 303.9);
    --chart-5: oklch(0.645 0.246 16.439);
    --sidebar: oklch(0.205 0 0);
    --sidebar-foreground: oklch(0.985 0 0);
    --sidebar-primary: oklch(0.985 0 0);
    --sidebar-primary-foreground: oklch(0.985 0 0);
    --sidebar-accent: oklch(0.269 0 0);
    --sidebar-accent-foreground: oklch(0.985 0 0);
    --sidebar-border: oklch(0.269 0 0);
    --sidebar-ring: oklch(0.439 0 0);
}


/* Styles de base pour le body */
body {
    @apply bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100;
    font-family: 'Inter', sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Scrollbar personnalisée */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-gray-300 dark:bg-gray-600 rounded;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-400 dark:bg-gray-500;
  }

  /* Cartes et conteneurs */
  .card {
    @apply bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 border border-gray-200 dark:border-gray-700;
  }

  /* Tableaux responsifs */
  @media (max-width: 640px) {
    table {
      @apply w-full text-xs;
    }

    thead {
      @apply hidden;
    }

    tbody tr {
      @apply block border-b border-gray-200 dark:border-gray-700 py-2;
    }

    tbody td {
      @apply block py-1 text-right pl-24 relative;
    }

    tbody td::before {
      content: attr(data-label);
      @apply absolute left-4 top-1/2 -translate-y-1/2 font-medium text-gray-700 dark:text-gray-300;
    }

    /* Exception pour la cellule d'action */
    tbody td:last-child {
      @apply py-2 border-t border-gray-100 dark:border-gray-800 mt-2;
    }
  }

  /* Gestion des textes sur petits écrans */
  @media (max-width: 375px) {
    h1 {
      @apply text-lg;
    }

    h2, h3 {
      @apply text-base;
    }

    p, button, .text-sm {
      @apply text-xs;
    }
  }

  /* Optimisations pour écrans tactiles */
  @media (hover: none) {
    .touch-target {
      @apply min-h-10 min-w-10;
    }
  }

  /* Optimisation pour l'impression */
  @media print {
    .no-print {
      @apply hidden;
    }

    body {
      @apply bg-white text-black;
    }

    .page-break {
      page-break-before: always;
    }
  }

  /* Animation pour chargement */
  @keyframes pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }

  .loading-pulse {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  /* Boutons */
  .btn {
    @apply px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 flex items-center gap-2;
  }

  .btn-primary {
    @apply bg-blue-600 hover:bg-blue-700 text-white dark:bg-blue-700 dark:hover:bg-blue-600;
  }

  .btn-secondary {
    @apply bg-gray-100 hover:bg-gray-200 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-300;
  }

  .btn-success {
    @apply bg-green-600 hover:bg-green-700 text-white dark:bg-green-700 dark:hover:bg-green-600;
  }

  .btn-danger {
    @apply bg-red-600 hover:bg-red-700 text-white dark:bg-red-700 dark:hover:bg-red-600;
  }

  /* Transitions pour les interactions */
  button, a, select, input, .transition {
    @apply transition-all duration-200;
  }

  /* Accessibilité focus */
  :focus-visible {
    @apply outline-none ring-2 ring-blue-500 dark:ring-blue-400;
  }

  /* Tooltips */
  .tooltip {
    @apply relative inline-block;
  }

  .tooltip .tooltip-text {
    @apply invisible absolute z-10 text-xs py-1 px-2 bg-gray-800 dark:bg-gray-700 text-white dark:text-gray-100 rounded;
    bottom: 125%;
    left: 50%;
    transform: translateX(-50%);
    white-space: nowrap;
    opacity: 0;
    transition: opacity 0.3s;
  }

  .tooltip:hover .tooltip-text {
    @apply visible opacity-100;
  }

  /* Menus déroulants */
  .dropdown {
    @apply relative inline-block;
  }

  .dropdown-content {
    @apply hidden absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 shadow-lg rounded-md overflow-hidden z-20 border border-gray-200 dark:border-gray-700;
  }

  .dropdown.active .dropdown-content {
    @apply block;
  }

  /* Notifications */
  .notification {
    @apply fixed top-4 right-4 max-w-xs bg-white dark:bg-gray-800 shadow-lg rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700 z-50;
  }

  .notification-success {
    @apply border-l-4 border-green-500;
  }

  .notification-error {
    @apply border-l-4 border-red-500;
  }

  .notification-warning {
    @apply border-l-4 border-yellow-500;
  }

  .notification-info {
    @apply border-l-4 border-blue-500;
  }

  /* Graphiques responsifs */
  .recharts-responsive-container {
    @apply !w-full;
  }

  /* Adaptations des graphiques en dark mode */
  .dark .recharts-cartesian-grid-vertical line,
  .dark .recharts-cartesian-grid-horizontal line {
    @apply stroke-gray-700;
  }

  .dark .recharts-legend-item-text {
    @apply fill-gray-300;
  }

  .dark .recharts-text {
    @apply fill-gray-400;
  }

  /* Amélioration des filtres */
  .filter-badge {
    @apply inline-flex items-center px-2 py-1 rounded-full text-xs font-medium;
  }

  .filter-badge-blue {
    @apply bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200;
  }

  .filter-badge-green {
    @apply bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200;
  }

  .filter-badge-red {
    @apply bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200;
  }

  .filter-badge-purple {
    @apply bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200;
  }

  .filter-badge-yellow {
    @apply bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200;
  }

  /* Badges indicateurs */
  .indicator-badge {
    @apply inline-flex items-center px-2 py-0.5 rounded text-xs font-medium;
  }

  .indicator-calculated {
    @apply bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200;
  }

  .indicator-demo {
    @apply bg-yellow-100 dark:bg-yellow-800 text-yellow-800 dark:text-yellow-200;
  }

  .indicator-positive {
    @apply bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-200;
  }

  .indicator-negative {
    @apply bg-red-100 dark:bg-red-800 text-red-800 dark:text-red-200;
  }

  .indicator-neutral {
    @apply bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200;
  }

  /* Amélioration des listes en mode mobile */
  @media (max-width: 640px) {
    .responsive-list {
      @apply flex flex-col space-y-2;
    }

    .responsive-list-item {
      @apply bg-white dark:bg-gray-800 p-3 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700;
    }
  }

  /* Overlay mobile amélioré */
  .mobile-overlay {
    @apply fixed inset-0 bg-black/50 backdrop-blur-sm z-40 transition-opacity duration-300;
  }

  .mobile-menu {
    @apply fixed top-0 left-0 w-64 h-full bg-white dark:bg-gray-800 shadow-lg z-50 transform transition-transform duration-300;
  }

  /* Tableaux de bord responsifs */
  .dashboard-grid {
    @apply grid gap-4;
    grid-template-columns: repeat(auto-fill, minmax(min(100%, 300px), 1fr));
  }

  .dashboard-card {
    @apply bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 border border-gray-200 dark:border-gray-700 flex flex-col;
  }

  .dashboard-card-header {
    @apply flex justify-between items-center mb-3;
  }

  .dashboard-card-body {
    @apply flex-grow;
  }

  .dashboard-card-footer {
    @apply mt-4 pt-3 border-t border-gray-200 dark:border-gray-700 text-sm text-gray-500 dark:text-gray-400;
  }

  /* Menu mobile latéral amélioré */
  .side-menu {
    @apply h-full flex flex-col;
  }

  .side-menu-header {
    @apply p-4 border-b border-gray-200 dark:border-gray-700;
  }

  .side-menu-body {
    @apply p-4 flex-grow overflow-y-auto;
  }

  .side-menu-footer {
    @apply p-4 border-t border-gray-200 dark:border-gray-700;
  }

  .side-menu-item {
    @apply py-2 px-3 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors;
  }

  .side-menu-item.active {
    @apply bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200;
  }

  /* Formulaires adaptés pour petit écran */
  @media (max-width: 640px) {
    .form-grid {
      @apply grid grid-cols-1 gap-4;
    }

    .form-group {
      @apply mb-4;
    }

    .form-label {
      @apply block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1;
    }

    .form-input,
    .form-select,
    .form-textarea {
      @apply block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100;
    }
  }

  /* États des graphiques */
  .chart-empty {
    @apply flex items-center justify-center h-64 bg-gray-50 dark:bg-gray-800 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-700;
  }

  .chart-loading {
    @apply flex items-center justify-center h-64;
  }

  .chart-error {
    @apply bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 dark:border-red-600 p-4 rounded;
  }

  /* Améliorations spécifiques pour les écrans très larges */
  @media (min-width: 1536px) {
    .container-xl {
      @apply max-w-screen-2xl mx-auto;
    }

    .dashboard-xl {
      grid-template-columns: repeat(4, 1fr);
    }

    .chart-xl {
      @apply h-96;
    }
  }

  /* Optimisations pour tablettes */
  @media (min-width: 768px) and (max-width: 1023px) {
    .tablet-optimized-padding {
      @apply px-4 py-3;
    }

    .tablet-optimized-text {
      @apply text-sm;
    }

    .tablet-optimized-chart {
      @apply h-72;
    }
  }

  /* Gestes tactiles améliorés */
  @media (hover: none) {
    .touch-friendly-button {
      @apply py-3;
    }

    .touch-friendly-select {
      @apply text-base py-3;
    }
  }

  /* Style d'impression pour les rapports */
  @media print {
    @page {
      size: A4;
      margin: 2cm;
    }

    body {
      -webkit-print-color-adjust: exact !important;
      print-color-adjust: exact !important;
    }

    .print-break-inside-avoid {
      break-inside: avoid;
    }

    .print-break-before {
      break-before: page;
    }

    .print-header {
      @apply text-xl font-bold mb-4;
    }

    .print-footer {
      position: fixed;
      bottom: 0;
      width: 100%;
      @apply text-sm text-center text-gray-500;
    }

    .print-table {
      @apply w-full border-collapse;
    }

    .print-table th,
    .print-table td {
      @apply border border-gray-300 p-2;
    }
  }

  /* Classes utilitaires supplémentaires pour la responsivité */
  .text-xs-on-mobile {
    @apply text-sm;
  }

  @media (max-width: 640px) {
    .text-xs-on-mobile {
      @apply text-xs;
    }
  }

  .hidden-on-mobile {
    @apply block;
  }

  @media (max-width: 640px) {
    .hidden-on-mobile {
      @apply hidden;
    }
  }

  .shown-on-mobile {
    @apply hidden;
  }

  @media (max-width: 640px) {
    .shown-on-mobile {
      @apply block;
    }
  }

  /* Classes pour faciliter l'adaptation des interactions */
  .tap-area {
    @apply relative;
  }

  .tap-area::after {
    content: '';
    @apply absolute inset-0 -m-2 cursor-pointer;
  }

  /* Animations douces pour les transitions d'interface */
  .fade-enter {
    opacity: 0;
  }

  .fade-enter-active {
    opacity: 1;
    transition: opacity 200ms;
  }

  .fade-exit {
    opacity: 1;
  }

  .fade-exit-active {
    opacity: 0;
    transition: opacity 200ms;
  }

  /* Astuces pour améliorer la performance sur mobile */
  @media (max-width: 640px) {
    .performance-critical {
      will-change: transform;
      transform: translateZ(0);
    }
  }


@layer base {
    * {
        @apply border-border;
    }

    body {
        @apply bg-background text-foreground;
    }
}
/* Styles de base */
body {
    font-family: 'Inter', sans-serif;
}

h1, h2, h3, h4, h5, h6 {
    font-family: 'Instrument Sans', sans-serif;
}

/* Animations */
.animate-in {
    opacity: 1 !important;
    transform: translateY(0) !important;
}

.scroll-animate {
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.7s ease-out;
}

.stagger-item {
    transition-delay: calc(var(--index) * 100ms);
}

.pulse-soft {
    animation: pulse-soft 3s infinite;
}

@keyframes pulse-soft {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

/* Header */
.header {
    position: sticky;
    top: 0;
    z-index: 50;
    background-color: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(10px);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.nav-link {
    padding: 0.5rem 1rem;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--text-color);
    transition: color 0.3s ease;
}

.nav-link:hover {
    color: var(--primary-color);
}

.mobile-menu-button {
    padding: 0.5rem;
    border-radius: 0.375rem;
    color: #6b7280;
    transition: all 0.3s ease;
}

.mobile-menu-button:hover {
    color: #374151;
    background-color: rgba(243, 244, 246, 0.5);
    backdrop-filter: blur(10px);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}
